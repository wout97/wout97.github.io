<!doctype HTML>
<html>
<!-- loading js libraries-->
<script src="https://aframe.io/releases/1.0.3/aframe.min.js"></script>
<script src="https://raw.githack.com/jeromeetienne/AR.js/2.2.0/aframe/build/aframe-ar.js"></script>
<!--<script src="https://rawgit.com/donmccurdy/aframe-extras/master/dist/aframe-extras.loaders.min.js"></script>-->
<script src="https://cdn.jsdelivr.net/gh/donmccurdy/aframe-extras@v6.1.0/dist/aframe-extras.min.js"></script>
<script src="https://unpkg.com/aframe-text-geometry-component@^0.5.0/dist/aframe-text-geometry-component.min.js"></script> 
<script src="https://unpkg.com/aframe-event-set-component@3.0.3/dist/aframe-event-set-component.min.js"></script>

<!--https://www.creators3d.com/online-viewer !! https://gltf-viewer.donmccurdy.com/-->
<!--https://atinkerholic.wordpress.com/2018/10/12/how-to-use-multi-markers-on-ar-js-with-a-frame/ -->

  <body style='margin : 0px; overflow: hidden;'>
    <!-- a scene -->
    <a-scene embedded arjs='trackingMethod: best; debugUIEnabled: false' >
      <!-- registering assets -->
      <a-assets>
        <a-asset-item id="optimerBoldFont" src="https://rawgit.com/mrdoob/three.js/dev/examples/fonts/optimer_bold.typeface.json"></a-asset-item>
      </a-assets>
      <a-assets>
        <video id="my-video" src="./video.mp4"></video>
      </a-assets>
      <a-assets>
        <img id="my-image" src="./picture.png">
      </a-assets>
      <a-assets>
        <img id="direction" src="./direction.png">
      </a-assets>
      <a-assets>
        <img id="dienst" src="./dienstregeling.png">
      </a-assets>
      <a-assets>
        <img id="texture" src="./wood.jpg">
      </a-assets>
      <a-assets>
        <a-asset-item id="train" src="./traindesiro.glb"></a-asset-item>
      </a-assets>

      <!-- kanji marker-->
      <a-marker preset="area"  >
        <a-entity id="all" scale="2 2 2">
        <!--<a-plane  id="target" height="4" position="0 -0.3 0" width="4" rotation="-90 0 0"   material="src: #texture;"  ></a-plane>-->
        <a-sphere color="yellow" radius="0.2" position="-2 0 -2"></a-sphere>
        <a-sphere color="red" radius="0.2" position="2 0 -2"></a-sphere>
        <a-sphere color="green" radius="0.2" position="-2 0 2"></a-sphere>
        <a-sphere radius="0.2" position="2 0 2"></a-sphere>
        <a-image   src="#my-image" id="logo" scale="1 1 1" position='0 0 1.5' rotation="270 180 0"   ></a-image>
        <a-box  id="myBox"  visible="false" material='opacity: 0.8;' position='0 3 0' material='color: yellow;' animation="property: rotation; to: 0 360 0; loop: true; dur: 10000" > </a-box>
        <a-entity  id="train" rotation="270 180 0" gltf-model="#train" scale="0.5 0.5 0.5"  position='10 0 0'  animation="property: position;from: 10 0 0; to: -10 0 0; dur: 5000; easing: linear;  loop: true;" ></a-entity>
        <a-entity   position='1.5 0 0.5' rotation="270 180 0" text-geometry="value: NMBS AR; font: #optimerBoldFont"></a-entity>
        <a-entity line="start: 0, 0, 0; end: 0.5 0 0; color: red"
          line__2="start: 0, 0, 0; end: 0 0.5 0; color: green"
          line__3="start: 0, 0, 0; end: 0 0 0.5; color: blue"></a-entity>
        <a-image  src="#direction" id="logo1" scale="1 1 1" position='-1 0 -1' rotation="270 180 0"   ></a-image>
        <a-entity   position='1 0 -1' rotation="270 180 0" text-geometry="value: 1; font: #optimerBoldFont"></a-entity>
        <a-entity>
        <a-entity id="test" rotation="0 0 0">
        <a-triangle material="side: double" position="1 0 -1.5" scale="0.5 0.5 0.2" src="#texture" id="tri" rotation="0 0 0"></a-triangle>
        <a-box id="triAng"position="1 -0.6 -1.5" rotation="270 180 0" scale="0.05 0.05 1" ></a-box>
      </a-entity>
      </a-entity>
     </a-entity>
      </a-marker>

      <!-- hiro marker -->
      <a-marker preset="hiro">
        <a-plane  rotation="-90 0 0" color="#CCC" height="0.7" width="0.7"></a-plane>
        <a-sphere id="Latern"  color="tomato" position='0 3 0' radius="0.5"></a-sphere>
        <a-box src="#texture" scale="0.15 3 0.15" position="0 1.5 0"> </a-box>
      </a-marker>

    
    <a-entity camera >
      
        
    </a-entity>
      
    </a-scene>
  </body>
 <div>
  <span id="myText" style='z-index: 1; color: white; position: fixed; width: 100%; left:0px; bottom: 10px; background-color: #444444; opacity: 50%'>Move the square 
  <div style="text-align:center;width:100%;">
    <div class="Debug sliders">
     size:  <input type="number" min="1" max="10" value="1" class="slider" id="sizeSlider">
     <div> rotation:  
       <input type="range" min="0" max="360" value="1" class="slider" id="rotationSliderX"> 
      <input type="range" min="0" max="360" value="1" class="slider" id="rotationSliderY"> 
      <input type="range" min="0" max="360" value="1" class="slider" id="rotationSliderZ">
    </div>
    <div> position:  
      <input type="number" min="0" max="3" value="1" step="0.1" class="slider" id="positionSliderX"> 
     <input type="number" min="0" max="3" value="0" step="0.1" class="slider" id="positionSliderY"> 
     <input type="number" min="0" max="3" value="-1.5" step="0.1" class="slider" id="positionSliderZ">
   </div>
    
    </div>
  </div>

</span>
</div>
  </body>
  <script>
    var myVar;

function myFunction() {
  myVar = setTimeout(showPage, 3000);
}

function showPage() {
  document.getElementById("loader").style.display = "none";
  document.getElementById("myDiv").style.display = "block";
}
     var a = window.location.toString();
  var file = a.substring(a.indexOf("?") + 1);
      var xobj = new XMLHttpRequest();
            xobj.overrideMimeType("application/json");
            if(file==a){
              xobj.open('GET', 'ARjsMultiMarkerFile', true); // 
            }
            else{
              xobj.open('GET', file, true); // 
            }
          xobj.onreadystatechange = function () { 
      if (xobj.readyState == 4 && xobj.status == "200") {
        localStorage.setItem('ARjsMultiMarkerFile',xobj.responseText);
        }};
        xobj.send();


var sizeSlider = document.getElementById("sizeSlider");
var rotationXSlider = document.getElementById("rotationSliderX");
var rotationYSlider = document.getElementById("rotationSliderY");
var rotationZSlider = document.getElementById("rotationSliderZ");
var positionXSlider = document.getElementById("positionSliderX");
var positionYSlider = document.getElementById("positionSliderY");
var positionZSlider = document.getElementById("positionSliderZ");
var logo = document.getElementById("test");

sizeSlider.oninput = function() {
  logo.setAttribute("scale", this.value + ' ' + this.value + ' '+ this.value);
}
rotationXSlider.oninput = function() {
  changeRotation()}
rotationYSlider.oninput = function() {
  changeRotation()}
rotationZSlider.oninput = function() {
  changeRotation()}

positionYSlider.oninput = function(){
  changePosition()
}
positionXSlider.oninput = function(){
  changePosition()
}
positionZSlider.oninput = function(){
  changePosition()
}
function changePosition(){
  logo.setAttribute("position", positionXSlider.value + ' ' + positionYSlider.value + ' ' + positionZSlider.value);
}
function changeRotation(){
  logo.setAttribute("rotation", rotationXSlider.value + ' ' +rotationYSlider.value + ' '+ rotationZSlider.value);
}
 var myBoxPosition = {};
  myBoxPosition.x = 0;
  myBoxPosition.y = 0;
  myBoxPosition.z = 0;

  var myTrainPosition = {};
  myTrainPosition.x = 0;
  myTrainPosition.y = 0;
  myTrainPosition.z = 0;

var ballElement = document.getElementById("myBox")
var laternEl = document.getElementById("Latern")

var Color = 1

function changeColor(){
  if(Color == 1){
    laternEl.setAttribute('color', 'green');
    Color =2
  }else if(Color == 2){
    laternEl.setAttribute('color', 'orange');
    Color =3
  }else{
    laternEl.setAttribute('color', 'red');
    Color =1
  }
}

function move(directionX, directionY, directionZ){
  console.log("Button clicked, direction :" + directionX +" : "+ directionY + " : " + directionZ)
  i = 0;
  disablleAllButtons(true)
  var idInterval = setInterval(() => {
  myBoxPosition.x += directionX;
  myBoxPosition.y += directionY;
  myBoxPosition.z += directionZ;
  ballElement.setAttribute('position', myBoxPosition.x + ' ' + myBoxPosition.z + ' ' + myBoxPosition.y + ' ');
  ballElement.setAttribute('color', 'green');
  if(i == 3){
    i=0
    ballElement.setAttribute('color', 'yellow');
    disableAllButtons(false);
    clearInterval(idInterval);
  }
  i +=1
}, 150);
}

function disablleAllButtons(bool){
  document.getElementById("btnUp").disabled = bool;
  document.getElementById("btnDown").disabled = bool;
  document.getElementById("btnRight").disabled = bool;
  document.getElementById("btnLeft").disabled = boolue;
  document.getElementById("btnFly").disabled = bool;
}
  </script>
  <style>

.button {
  background-color: #4CAF50; /* Green */
  border: none;
  color: white;
  padding: 10px 10px;
  text-align: center;
  text-decoration: none;
  display: inline-block;
  font-size: 16px;
 
  cursor: pointer;
}
.button2 {
  background-color: white; 
  color: black; 
  border-radius: 4px;
  border: 2px solid #008CBA;
  
}
</style>
</html>
